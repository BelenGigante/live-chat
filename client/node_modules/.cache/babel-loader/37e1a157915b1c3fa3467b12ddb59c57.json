{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/belen/bootcamp/projects/live-chat/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/belen/bootcamp/projects/live-chat/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/belen/bootcamp/projects/live-chat/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// Node Modules\nimport React,{useRef}from'react';import{useQuery,useLazyQuery}from'@apollo/client';// Utilities\nimport Auth from'../utils/auth';import{QUERY_USERS,SEARCH_USERS}from'../utils/queries';// Components\nimport UserList from'../components/UserList';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(){var _useQuery=useQuery(QUERY_USERS),loading=_useQuery.loading,data=_useQuery.data;var _useLazyQuery=useLazyQuery(SEARCH_USERS),_useLazyQuery2=_slicedToArray(_useLazyQuery,2),searchUsers=_useLazyQuery2[0],searchData=_useLazyQuery2[1].data;var users=(data===null||data===void 0?void 0:data.users)||[];var searchResults=(searchData===null||searchData===void 0?void 0:searchData.searchUsers)||[];var inputRef=useRef();var renderUserList=function renderUserList(){if(loading){return/*#__PURE__*/_jsx(\"h2\",{children:\"Loading...\"});}else{return/*#__PURE__*/_jsx(UserList,{users:users,title:\"List of Users\"});}};var renderUsername=function renderUsername(){if(!Auth.loggedIn())return null;return Auth.getProfile().data.username;};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return searchUsers({variables:{term:inputRef.current.value}});case 3:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Search\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",ref:inputRef}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Search\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(UserList,{users:searchResults,title:\"Search Results\"})}),/*#__PURE__*/_jsx(\"div\",{children:renderUsername()}),/*#__PURE__*/_jsx(\"div\",{children:renderUserList()})]});};export default Home;","map":{"version":3,"names":["React","useRef","useQuery","useLazyQuery","Auth","QUERY_USERS","SEARCH_USERS","UserList","Home","loading","data","searchUsers","searchData","users","searchResults","inputRef","renderUserList","renderUsername","loggedIn","getProfile","username","handleSubmit","event","preventDefault","variables","term","current","value"],"sources":["C:/Users/belen/bootcamp/projects/live-chat/src/pages/Home.js"],"sourcesContent":["// Node Modules\nimport React, { useRef } from 'react';\nimport { useQuery, useLazyQuery } from '@apollo/client';\n// Utilities\nimport Auth from '../utils/auth';\nimport { QUERY_USERS, SEARCH_USERS } from '../utils/queries';\n// Components\nimport UserList from '../components/UserList';\n\nconst Home = () => {\n  const { loading, data } = useQuery(QUERY_USERS);\n  const [searchUsers, { data: searchData }] = useLazyQuery(SEARCH_USERS);\n  const users = data?.users || [];\n  const searchResults = searchData?.searchUsers || [];\n  const inputRef = useRef();\n\n  const renderUserList = () => {\n    if (loading) {\n      return <h2>Loading...</h2>\n    } else {\n      return <UserList users={users} title=\"List of Users\" />\n    }\n  }\n\n  const renderUsername = () => {\n    if (!Auth.loggedIn()) return null;\n    return Auth.getProfile().data.username;\n  }\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    await searchUsers({\n      variables: {\n        term: inputRef.current.value\n      }\n    });\n  }\n\n  return (\n    <main>\n      <form onSubmit={handleSubmit}>\n        <label>Search</label>\n        <input\n          type=\"text\"\n          ref={inputRef}\n        />\n        <button type=\"submit\">Search</button>\n      </form>\n      <div>\n        <UserList\n          users={searchResults}\n          title=\"Search Results\"\n        />\n      </div>\n      <div>\n        {renderUsername()}\n      </div>\n      <div>\n        {renderUserList()}\n      </div>\n    </main>\n  );\n};\n\nexport default Home;\n"],"mappings":"gZAAA;AACA,MAAOA,MAAK,EAAIC,MAAM,KAAQ,OAAO,CACrC,OAASC,QAAQ,CAAEC,YAAY,KAAQ,gBAAgB,CACvD;AACA,MAAOC,KAAI,KAAM,eAAe,CAChC,OAASC,WAAW,CAAEC,YAAY,KAAQ,kBAAkB,CAC5D;AACA,MAAOC,SAAQ,KAAM,wBAAwB,CAAC,wFAE9C,GAAMC,KAAI,CAAG,QAAPA,KAAI,EAAS,CACjB,cAA0BN,QAAQ,CAACG,WAAW,CAAC,CAAvCI,OAAO,WAAPA,OAAO,CAAEC,IAAI,WAAJA,IAAI,CACrB,kBAA4CP,YAAY,CAACG,YAAY,CAAC,gDAA/DK,WAAW,mBAAUC,UAAU,mBAAhBF,IAAI,CAC1B,GAAMG,MAAK,CAAG,CAAAH,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEG,KAAK,GAAI,EAAE,CAC/B,GAAMC,cAAa,CAAG,CAAAF,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAAED,WAAW,GAAI,EAAE,CACnD,GAAMI,SAAQ,CAAGd,MAAM,EAAE,CAEzB,GAAMe,eAAc,CAAG,QAAjBA,eAAc,EAAS,CAC3B,GAAIP,OAAO,CAAE,CACX,mBAAO,oBAAI,YAAU,EAAK,CAC5B,CAAC,IAAM,CACL,mBAAO,KAAC,QAAQ,EAAC,KAAK,CAAEI,KAAM,CAAC,KAAK,CAAC,eAAe,EAAG,CACzD,CACF,CAAC,CAED,GAAMI,eAAc,CAAG,QAAjBA,eAAc,EAAS,CAC3B,GAAI,CAACb,IAAI,CAACc,QAAQ,EAAE,CAAE,MAAO,KAAI,CACjC,MAAOd,KAAI,CAACe,UAAU,EAAE,CAACT,IAAI,CAACU,QAAQ,CACxC,CAAC,CAED,GAAMC,aAAY,4FAAG,iBAAOC,KAAK,mHAC/BA,KAAK,CAACC,cAAc,EAAE,CAAC,sBACjBZ,YAAW,CAAC,CAChBa,SAAS,CAAE,CACTC,IAAI,CAAEV,QAAQ,CAACW,OAAO,CAACC,KACzB,CACF,CAAC,CAAC,sDACH,kBAPKN,aAAY,4CAOjB,CAED,mBACE,qCACE,cAAM,QAAQ,CAAEA,YAAa,wBAC3B,uBAAO,QAAM,EAAQ,cACrB,cACE,IAAI,CAAC,MAAM,CACX,GAAG,CAAEN,QAAS,EACd,cACF,eAAQ,IAAI,CAAC,QAAQ,UAAC,QAAM,EAAS,GAChC,cACP,kCACE,KAAC,QAAQ,EACP,KAAK,CAAED,aAAc,CACrB,KAAK,CAAC,gBAAgB,EACtB,EACE,cACN,qBACGG,cAAc,EAAE,EACb,cACN,qBACGD,cAAc,EAAE,EACb,GACD,CAEX,CAAC,CAED,cAAeR,KAAI"},"metadata":{},"sourceType":"module"}