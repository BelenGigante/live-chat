{"ast":null,"code":"// Node Modules\nimport React from'react';import{Navigate,useParams}from'react-router-dom';import{useQuery}from'@apollo/client';// Utilities\nimport Auth from'../utils/auth';import{QUERY_USERS,QUERY_USER,QUERY_ME}from'../utils/queries';// Components\nimport UserList from'../components/UserList';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Profile=function Profile(){var _useParams=useParams(),id=_useParams.id;// Get current user\nvar _useQuery=useQuery(id?QUERY_USER:QUERY_ME,{variables:{id:id}}),loading=_useQuery.loading,data=_useQuery.data,error=_useQuery.error;// Get a list of all users\nvar _useQuery2=useQuery(QUERY_USERS),usersLoading=_useQuery2.usersLoading,usersData=_useQuery2.data;var user=(data===null||data===void 0?void 0:data.me)||(data===null||data===void 0?void 0:data.user)||{};var users=(usersData===null||usersData===void 0?void 0:usersData.users)||[];if(error)console.log(error);// redirect to personal profile page if username is yours\nif(Auth.loggedIn()&&Auth.getProfile().data._id===id){return/*#__PURE__*/_jsx(Navigate,{to:\"/me\",replace:true});}if(loading){return/*#__PURE__*/_jsx(\"h4\",{children:\"Loading...\"});}if(!(user!==null&&user!==void 0&&user.username)){return/*#__PURE__*/_jsx(\"h4\",{children:\"You need to be logged in to see this. Use the navigation links above to sign up or log in!\"});}var renderUserList=function renderUserList(){if(usersLoading)return null;// Only renders users who's profile we're not currently viewing\nvar notMeUsers=users.filter(function(o){return o._id!==user._id;});return/*#__PURE__*/_jsx(UserList,{users:notMeUsers,title:\"User List\"});};var renderCurrentUserInfo=function renderCurrentUserInfo(){if(id)return null;return/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"username: \",user.username]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"email: \",user.email]})]});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Viewing \",id?\"\".concat(user.username,\"'s\"):'your',\" profile.\"]}),renderCurrentUserInfo(),renderUserList()]})});};export default Profile;","map":{"version":3,"names":["React","Navigate","useParams","useQuery","Auth","QUERY_USERS","QUERY_USER","QUERY_ME","UserList","Profile","id","variables","loading","data","error","usersLoading","usersData","user","me","users","console","log","loggedIn","getProfile","_id","username","renderUserList","notMeUsers","filter","o","renderCurrentUserInfo","email"],"sources":["C:/Users/belen/bootcamp/projects/live-chat/src/pages/Profile.js"],"sourcesContent":["// Node Modules\nimport React from 'react';\nimport { Navigate, useParams } from 'react-router-dom';\nimport { useQuery } from '@apollo/client';\n// Utilities\nimport Auth from '../utils/auth';\nimport { QUERY_USERS, QUERY_USER, QUERY_ME } from '../utils/queries';\n// Components\nimport UserList from '../components/UserList';\n\nconst Profile = () => {\n  const { id } = useParams();\n\n  // Get current user\n  const { loading, data, error } = useQuery(id ? QUERY_USER : QUERY_ME, {\n    variables: { id },\n  });\n\n  // Get a list of all users\n  const { usersLoading, data: usersData } = useQuery(QUERY_USERS);\n\n  const user = data?.me || data?.user || {};\n  const users = usersData?.users || [];\n\n  if (error) console.log(error);\n\n  // redirect to personal profile page if username is yours\n  if (Auth.loggedIn() && Auth.getProfile().data._id === id) {\n    return <Navigate to=\"/me\" replace />;\n  }\n\n  if (loading) {\n    return <h4>Loading...</h4>;\n  }\n\n  if (!user?.username) {\n    return (\n      <h4>\n        You need to be logged in to see this. Use the navigation links above to\n        sign up or log in!\n      </h4>\n    );\n  }\n\n  const renderUserList = () => {\n    if (usersLoading) return null;\n    // Only renders users who's profile we're not currently viewing\n    const notMeUsers = users.filter(o => o._id !== user._id);\n    return <UserList users={notMeUsers} title=\"User List\" />;\n  };\n\n  const renderCurrentUserInfo = () => {\n    if (id) return null;\n    return (\n      <ul>\n        <li>username: {user.username}</li>\n        <li>email: {user.email}</li>\n      </ul>\n    );\n  }\n\n  return (\n    <div>\n      <div>\n        <h2>\n          Viewing {id ? `${user.username}'s` : 'your'} profile.\n        </h2>\n        {renderCurrentUserInfo()}\n        {renderUserList()}\n      </div>\n    </div>\n  );\n};\n\nexport default Profile;\n"],"mappings":"AAAA;AACA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,CAAEC,SAAS,KAAQ,kBAAkB,CACtD,OAASC,QAAQ,KAAQ,gBAAgB,CACzC;AACA,MAAOC,KAAI,KAAM,eAAe,CAChC,OAASC,WAAW,CAAEC,UAAU,CAAEC,QAAQ,KAAQ,kBAAkB,CACpE;AACA,MAAOC,SAAQ,KAAM,wBAAwB,CAAC,wFAE9C,GAAMC,QAAO,CAAG,QAAVA,QAAO,EAAS,CACpB,eAAeP,SAAS,EAAE,CAAlBQ,EAAE,YAAFA,EAAE,CAEV;AACA,cAAiCP,QAAQ,CAACO,EAAE,CAAGJ,UAAU,CAAGC,QAAQ,CAAE,CACpEI,SAAS,CAAE,CAAED,EAAE,CAAFA,EAAG,CAClB,CAAC,CAAC,CAFME,OAAO,WAAPA,OAAO,CAAEC,IAAI,WAAJA,IAAI,CAAEC,KAAK,WAALA,KAAK,CAI5B;AACA,eAA0CX,QAAQ,CAACE,WAAW,CAAC,CAAvDU,YAAY,YAAZA,YAAY,CAAQC,SAAS,YAAfH,IAAI,CAE1B,GAAMI,KAAI,CAAG,CAAAJ,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEK,EAAE,IAAIL,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEI,IAAI,GAAI,CAAC,CAAC,CACzC,GAAME,MAAK,CAAG,CAAAH,SAAS,SAATA,SAAS,iBAATA,SAAS,CAAEG,KAAK,GAAI,EAAE,CAEpC,GAAIL,KAAK,CAAEM,OAAO,CAACC,GAAG,CAACP,KAAK,CAAC,CAE7B;AACA,GAAIV,IAAI,CAACkB,QAAQ,EAAE,EAAIlB,IAAI,CAACmB,UAAU,EAAE,CAACV,IAAI,CAACW,GAAG,GAAKd,EAAE,CAAE,CACxD,mBAAO,KAAC,QAAQ,EAAC,EAAE,CAAC,KAAK,CAAC,OAAO,OAAG,CACtC,CAEA,GAAIE,OAAO,CAAE,CACX,mBAAO,oBAAI,YAAU,EAAK,CAC5B,CAEA,GAAI,EAACK,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEQ,QAAQ,EAAE,CACnB,mBACE,oBAAI,4FAGJ,EAAK,CAET,CAEA,GAAMC,eAAc,CAAG,QAAjBA,eAAc,EAAS,CAC3B,GAAIX,YAAY,CAAE,MAAO,KAAI,CAC7B;AACA,GAAMY,WAAU,CAAGR,KAAK,CAACS,MAAM,CAAC,SAAAC,CAAC,QAAIA,EAAC,CAACL,GAAG,GAAKP,IAAI,CAACO,GAAG,GAAC,CACxD,mBAAO,KAAC,QAAQ,EAAC,KAAK,CAAEG,UAAW,CAAC,KAAK,CAAC,WAAW,EAAG,CAC1D,CAAC,CAED,GAAMG,sBAAqB,CAAG,QAAxBA,sBAAqB,EAAS,CAClC,GAAIpB,EAAE,CAAE,MAAO,KAAI,CACnB,mBACE,mCACE,sBAAI,YAAU,CAACO,IAAI,CAACQ,QAAQ,GAAM,cAClC,sBAAI,SAAO,CAACR,IAAI,CAACc,KAAK,GAAM,GACzB,CAET,CAAC,CAED,mBACE,kCACE,oCACE,sBAAI,UACM,CAACrB,EAAE,WAAMO,IAAI,CAACQ,QAAQ,OAAO,MAAM,CAAC,WAC9C,GAAK,CACJK,qBAAqB,EAAE,CACvBJ,cAAc,EAAE,GACb,EACF,CAEV,CAAC,CAED,cAAejB,QAAO"},"metadata":{},"sourceType":"module"}